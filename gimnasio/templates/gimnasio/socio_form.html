<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Gym - {% if socio %}Editar{% else %}Agregar{% endif %} Socio</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'gimnasio/css/estilos.css' %}">
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <div class="sidebar-logo">üèãÔ∏è Control Gym</div>
            <ul class="nav-menu">
                <li><a href="{% url 'dashboard' %}">üìä Dashboard</a></li>
                <li><a href="{% url 'socios_list' %}" class="active">üë• Socios</a></li>
                <li><a href="{% url 'lista_clases' %}">üèãÔ∏è Actividades</a></li>
                <li><a href="#">üë®‚Äçüè´ Instructores</a></li>
                <li><a href="#">üí∞ Caja</a></li>
                <li><a href="#">üì± WhatsApp</a></li>
                <li><a href="#">üìà Estad√≠sticas</a></li>
                <li><a href="#">‚ûï M√°s</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <header class="header-bar">
                <h1 class="header-title">Datos del Socio</h1>
                <div class="user-actions">
                    <span>Hola, Admin üëã</span>
                    <a href="{% url 'logout_usuario' %}" style="color: var(--sky-500); text-decoration: none; font-weight: bold;">Cerrar Sesi√≥n</a>
                </div>
            </header>

            <div class="form-container">
                <div class="form-header">
                    <div class="photo-upload">üë§</div>
                    <h2>Informaci√≥n Personal</h2>
                </div>
                <form method="post" action="{% url 'socio_form' %}">
                    {% csrf_token %}
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="id_socio">ID Socio *</label>
                            <input type="text" id="id_socio" name="id_socio" value="{% if socio %}{{ socio.id_socio }}{% endif %}" required>
                        </div>
                        <div class="form-group">
                            <label for="nombre">Nombre *</label>
                            <input type="text" id="nombre" name="nombre" value="{% if socio %}{{ socio.nombre }}{% endif %}" required>
                        </div>
                        <div class="form-group">
                            <label for="apellido">Apellido *</label>
                            <input type="text" id="apellido" name="apellido" value="{% if socio %}{{ socio.apellido }}{% endif %}" required>
                        </div>
                        <div class="form-group">
                            <label for="telefono">Tel√©fono *</label>
                            <input type="tel" id="telefono" name="telefono" value="{% if socio %}{{ socio.telefono }}{% endif %}" required>
                        </div>
                        <div class="form-group">
                            <label for="domicilio">Domicilio *</label>
                            <input type="text" id="domicilio" name="domicilio" value="{% if socio %}{{ socio.domicilio }}{% endif %}" required>
                        </div>
                        <div class="form-group">
                            <label for="tipo_socio">Tipo de Socio *</label>
                            <select id="tipo_socio" name="tipo_socio" required>
                                <option value="">Seleccionar...</option>
                                <option value="interno" {% if socio and socio.tipo_socio == 'interno' %}selected{% endif %}>Interno (Suscripci√≥n Gimnasio)</option>
                                <option value="externo" {% if socio and socio.tipo_socio == 'externo' %}selected{% endif %}>Externo (Pago por Clase)</option>
                            </select>
                        </div>
                        <!-- solo si interno -->
                        <div id="suscripcion-fields" style="display: {% if socio and socio.tipo_socio == 'interno' %}block{% else %}none{% endif %};">
                            <div class="form-group">
                                <label for="tipo_suscripcion">Tipo de Suscripci√≥n *</label>
                                <select id="tipo_suscripcion" name="tipo_suscripcion">
                                    <option value="mensual" {% if socio.suscripciones.first.tipo == 'mensual' %}selected{% endif %}>Mensual ($500)</option>
                                    <option value="trimestral" {% if socio.suscripciones.first.tipo == 'trimestral' %}selected{% endif %}>Trimestral ($1500)</option>
                                    <option value="anual" {% if socio.suscripciones.first.tipo == 'anual' %}selected{% endif %}>Anual ($6000)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="fecha_inicio">Fecha de Inicio Suscripci√≥n</label>
                                <input type="date" id="fecha_inicio" name="fecha_inicio" value="{% if socio.suscripciones.first %}{{ socio.suscripciones.first.fecha_inicio|date:'Y-m-d' }}{% endif %}">
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <a href="{% url 'socios_list' %}" class="btn btn-secondary">Cancelar</a>
                        <button type="submit" class="btn btn-primary">Guardar Socio</button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <script>
        document.getElementById('tipo_socio').addEventListener('change', function() {
            var fields = document.getElementById('suscripcion-fields');
            fields.style.display = (this.value === 'interno') ? 'block' : 'none';
        });
    </script>
</body>
</html>